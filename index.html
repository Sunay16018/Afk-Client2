<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>GOD MODE BOT v2.0</title>
    <style>
        :root { --bg: #0d1117; --panel: #161b22; --border: #30363d; --blue: #58a6ff; --green: #238636; --red: #da3633; --yellow: #e3b341; }
        body { background: var(--bg); color: #c9d1d9; font-family: sans-serif; margin: 0; display: flex; flex-direction: column; height: 100vh; overflow: hidden; }
        
        nav { display: flex; background: var(--panel); border-bottom: 1px solid var(--border); height: 50px; flex-shrink: 0; }
        nav button { flex: 1; border: none; background: none; color: #8b949e; font-weight: bold; cursor: pointer; position: relative; }
        nav button.active { color: var(--blue); border-bottom: 3px solid var(--blue); background: #1f242c; }
        nav button::after { content: ''; position: absolute; top: 5px; right: 5px; width: 6px; height: 6px; background: var(--green); border-radius: 50%; opacity: 0; }
        nav button.active::after { opacity: 1; }
        
        .tab { flex: 1; display: none; padding: 15px; overflow-y: auto; }
        .active-tab { display: block; }
        
        #logbox { background: #000; height: 50vh; overflow-y: auto; padding: 10px; font-size: 12px; border: 1px solid var(--border); font-family: monospace; border-radius: 6px; }
        
        input, select { background: var(--panel); border: 1px solid var(--border); color: white; padding: 12px; border-radius: 6px; width: 100%; margin-bottom: 10px; outline: none; box-sizing: border-box; }
        .btn { width: 100%; padding: 14px; border: none; border-radius: 6px; font-weight: bold; cursor: pointer; color: white; background: var(--green); margin-bottom: 10px; transition: all 0.2s; }
        .btn:hover { opacity: 0.9; transform: translateY(-1px); }
        
        /* MANUEL KONTROL STÄ°LLERÄ° */
        .control-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 8px; margin-bottom: 20px; max-width: 300px; margin-left: auto; margin-right: auto; }
        .c-btn { background: #21262d; border: 1px solid var(--border); color: white; padding: 15px; border-radius: 8px; font-weight: bold; cursor: pointer; user-select: none; transition: all 0.1s; }
        .c-btn.active { background: var(--blue); color: black; border-color: var(--blue); box-shadow: 0 0 10px rgba(88,166,255,0.5); }
        .c-btn:active { transform: scale(0.95); }
        
        .section-title { color: var(--blue); font-size: 12px; font-weight: bold; margin-bottom: 8px; border-bottom: 1px solid #30363d; padding-bottom: 5px; margin-top: 15px; }

        .inv-grid { display: grid; grid-template-columns: repeat(6, 1fr); gap: 5px; }
        .slot { background: #21262d; border: 1px solid var(--border); aspect-ratio: 1; border-radius: 4px; display: flex; align-items: center; justify-content: center; position: relative; cursor: pointer; transition: all 0.2s; }
        .slot:hover { border-color: var(--blue); background: #2d333b; }
        .slot img { width: 80%; }
        .count { position: absolute; bottom: 1px; right: 2px; font-size: 10px; background: rgba(0,0,0,0.8); padding: 0 3px; border-radius: 2px; }
        
        /* BOT LÄ°STESÄ° STÄ°LLERÄ° */
        .bot-item { padding: 10px; background: #161b22; margin-bottom: 5px; border: 1px solid #30363d; border-radius: 6px; display: flex; justify-content: space-between; align-items: center; cursor: pointer; transition: all 0.2s; }
        .bot-item:hover { border-color: #58a6ff; background: #1f242c; }
        .bot-item.selected { border-color: #58a6ff; background: #1f242c; }
        .bot-name { font-weight: bold; }
        .bot-status { display: flex; align-items: center; gap: 5px; }
        .status-dot { width: 8px; height: 8px; border-radius: 50%; background: #238636; }
        .kill-btn { width: 16px; height: 16px; background: #da3633; border-radius: 3px; display: flex; align-items: center; justify-content: center; color: white; font-size: 10px; font-weight: bold; cursor: pointer; border: none; transition: all 0.2s; }
        .kill-btn:hover { background: #ff6b6b; transform: scale(1.1); }
        
        /* STATS PANELÄ° */
        .stats-bar { display: flex; justify-content: center; gap: 20px; margin-bottom: 15px; flex-wrap: wrap; }
        .stat-item { text-align: center; padding: 5px 10px; background: #161b22; border-radius: 4px; border: 1px solid #30363d; min-width: 80px; }
        .stat-value { font-weight: bold; color: #58a6ff; }
        .stat-label { font-size: 10px; color: #8b949e; }
        
        /* YENÄ° Ã–ZELLÄ°K BUTONLARI */
        .feature-btn { background: #2d333b; border: 1px solid #444c56; padding: 8px 12px; border-radius: 4px; color: white; cursor: pointer; font-size: 11px; transition: all 0.2s; }
        .feature-btn:hover { background: #3d444d; border-color: #58a6ff; }
    </style>
</head>
<body>

<nav>
    <button onclick="T('bot')" id="n-bot" class="active">GÄ°RÄ°Åž</button>
    <button onclick="T('chat')" id="n-chat">CHAT/SPAM</button>
    <button onclick="T('ctrl')" id="n-ctrl">HAREKET</button>
</nav>

<div id="t-bot" class="tab active-tab">
    <div style="text-align: center; margin-bottom: 15px;">
        <span style="color: var(--yellow); font-weight: bold; font-size: 14px;">âš¡ GOD MODE v2.0</span>
    </div>
    <input id="host" placeholder="Sunucu IP (Ã¶r: play.hypixel.net)">
    <input id="user" placeholder="Bot Ä°smi">
    <select id="ver">
        <option value="1.20.1">1.20.1</option>
        <option value="1.8.9">1.8.9</option>
        <option value="1.21.1">1.21.1</option>
        <option value="1.19.2">1.19.2</option>
        <option value="1.18.2">1.18.2</option>
    </select>
    <button class="btn" onclick="start()" style="background: linear-gradient(90deg, #238636, #2ea043);">BAÄžLAN</button>
    
    <div class="section-title">AKTÄ°F BOTLAR</div>
    <div id="blist" style="margin-top:10px"></div>
</div>

<div id="t-chat" class="tab">
    <div id="logbox"></div>
    <div style="display:flex; gap:5px; margin-top:5px;">
        <input id="mi" placeholder="Mesaj..." onkeydown="if(event.key==='Enter') send()" style="margin:0;">
        <button onclick="send()" style="background:var(--blue); border:none; color:white; border-radius:6px; width:50px; font-weight:bold;">GÃ–NDER</button>
    </div>
    
    <div class="section-title">OTO SPAM MAKÄ°NESÄ°</div>
    <input id="spamMsg" placeholder="Spamlanacak mesajÄ± yaz...">
    <div style="display:flex; gap:5px;">
        <input id="spamDelay" type="number" placeholder="SÃ¼re (ms)" value="2000" min="1000" max="10000">
        <button id="spamBtn" class="btn" style="background:#21262d;" onclick="toggleSpam()">SPAM BAÅžLAT</button>
    </div>
    
    <div class="section-title">OTOMASYON Ã–ZELLÄ°KLERÄ°</div>
    <div style="display: flex; gap: 5px; flex-wrap: wrap;">
        <button class="feature-btn" onclick="toggleAutoEat()" id="autoEatBtn">AUTO-EAT: <span style="color:#27ae60;">âœ”</span></button>
        <button class="feature-btn" onclick="toggleAutoArmor()" id="autoArmorBtn">AUTO-ARMOR: <span style="color:#27ae60;">âœ”</span></button>
        <button class="feature-btn" onclick="togglePVP()" id="pvpBtn">AUTO-PVP: <span style="color:#27ae60;">âœ”</span></button>
    </div>
</div>

<div id="t-ctrl" class="tab">
    <div class="stats-bar">
        <div class="stat-item">
            <div class="stat-value" id="hp">--</div>
            <div class="stat-label">CAN</div>
        </div>
        <div class="stat-item">
            <div class="stat-value" id="food">--</div>
            <div class="stat-label">YEMEK</div>
        </div>
        <div class="stat-item">
            <div class="stat-value" id="armor">--</div>
            <div class="stat-label">ZIRH</div>
        </div>
        <div class="stat-item">
            <div class="stat-value" id="pos">--,--,--</div>
            <div class="stat-label">KONUM</div>
        </div>
    </div>

    <div class="section-title" style="text-align:center;">MANUEL KONTROL (BAS VE GÄ°T)</div>
    <div class="control-grid">
        <div></div>
        <button class="c-btn" id="btn-forward" onmousedown="move('forward', true)" ontouchstart="move('forward', true)" 
                onmouseup="move('forward', false)" ontouchend="move('forward', false)">W</button>
        <div></div>
        <button class="c-btn" id="btn-left" onmousedown="move('left', true)" ontouchstart="move('left', true)" 
                onmouseup="move('left', false)" ontouchend="move('left', false)">A</button>
        <button class="c-btn" id="btn-back" onmousedown="move('back', true)" ontouchstart="move('back', true)" 
                onmouseup="move('back', false)" ontouchend="move('back', false)">S</button>
        <button class="c-btn" id="btn-right" onmousedown="move('right', true)" ontouchstart="move('right', true)" 
                onmouseup="move('right', false)" ontouchend="move('right', false)">D</button>
        <button class="c-btn" id="btn-jump" onclick="jump()">ZIP</button>
        <button class="c-btn" id="btn-sneak" onclick="toggleSneak()">EÄžÄ°L</div>
    </div>

    <div class="section-title">KOORDÄ°NATA GÄ°T (AKILLI)</div>
    <div style="display:flex; gap:5px;">
        <input id="cx" type="number" placeholder="X" style="text-align:center;">
        <input id="cy" type="number" placeholder="Y" style="text-align:center;">
        <input id="cz" type="number" placeholder="Z" style="text-align:center;">
    </div>
    <button class="btn" style="background:linear-gradient(90deg, #58a6ff, #1f6feb);" onclick="goTo()">O NOKTAYA YÃœRÃœ</button>

    <div class="section-title">ENVANTER (TIKLA-AT)</div>
    <div class="inv-grid" id="inv"></div>
</div>

<script>
    let sid = localStorage.getItem('sid') || 's_'+Date.now(); 
    localStorage.setItem('sid', sid);
    let sel = "";
    let controls = { forward: false, back: false, left: false, right: false, jump: false, sneak: false };
    let isSpamming = false;
    let isSneaking = false;

    function T(t){
        document.querySelectorAll('.tab').forEach(x=>x.classList.remove('active-tab'));
        document.querySelectorAll('nav button').forEach(x=>x.classList.remove('active'));
        document.getElementById('t-'+t).classList.add('active-tab');
        document.getElementById('n-'+t).classList.add('active');
    }

    function start(){
        const h=document.getElementById('host').value, 
              u=document.getElementById('user').value, 
              v=document.getElementById('ver').value;
        if(h&&u) { 
            fetch(`/start?sid=${sid}&host=${h}&port=25565&user=${u}&ver=${v}&auto=true`); 
            sel=u; 
            T('chat'); 
        } else {
            alert("Sunucu IP ve Bot ismi gerekli!");
        }
    }

    // KES BUTONU FONKSÄ°YONU
    function killBot(botName) {
        if(confirm(`${botName} botunu kesmek istediÄŸinize emin misiniz?`)) {
            fetch(`/kill?sid=${sid}&user=${botName}`);
            if(sel === botName) sel = "";
        }
    }

    function send(){
        const i=document.getElementById('mi');
        if(i.value&&sel) { 
            fetch(`/send?sid=${sid}&user=${sel}&msg=${encodeURIComponent(i.value)}`); 
            i.value=""; 
        }
    }

    // SPAM FONKSÄ°YONU
    function toggleSpam() {
        if(!sel) return alert("Ã–nce botu baÅŸlat!");
        isSpamming = !isSpamming;
        const btn = document.getElementById('spamBtn');
        const msg = document.getElementById('spamMsg').value || "Spam Text";
        const delay = document.getElementById('spamDelay').value || 3000;

        if(isSpamming) {
            btn.innerText = "DURDUR";
            btn.style.background = "#da3633";
            fetch(`/spam?sid=${sid}&user=${sel}&state=true&msg=${encodeURIComponent(msg)}&delay=${delay}`);
        } else {
            btn.innerText = "SPAM BAÅžLAT";
            btn.style.background = "#21262d";
            fetch(`/spam?sid=${sid}&user=${sel}&state=false`);
        }
    }

    // MANUEL HAREKET FONKSÄ°YONU (GELÄ°ÅžMÄ°Åž)
    function move(dir, state) {
        if(!sel) return;
        controls[dir] = state;
        
        // GÃ¶rsel gÃ¼ncelleme
        const btn = document.getElementById('btn-'+dir);
        if(state) btn.classList.add('active');
        else btn.classList.remove('active');

        // Sunucuya bildir
        fetch(`/move?sid=${sid}&user=${sel}&dir=${dir}&state=${state}`);
    }

    function jump() {
        if(!sel) return;
        const btn = document.getElementById('btn-jump');
        btn.classList.add('active');
        fetch(`/move?sid=${sid}&user=${sel}&dir=jump&state=true`);
        setTimeout(() => {
            btn.classList.remove('active');
            fetch(`/move?sid=${sid}&user=${sel}&dir=jump&state=false`);
        }, 250);
    }

    function toggleSneak() {
        if(!sel) return;
        isSneaking = !isSneaking;
        const btn = document.getElementById('btn-sneak');
        if(isSneaking) {
            btn.classList.add('active');
            btn.innerText = "KALK";
        } else {
            btn.classList.remove('active');
            btn.innerText = "EÄžÄ°L";
        }
        fetch(`/move?sid=${sid}&user=${sel}&dir=sneak&state=${isSneaking}`);
    }

    function goTo(){
        const x=document.getElementById('cx').value, 
              y=document.getElementById('cy').value, 
              z=document.getElementById('cz').value;
        if(x&&y&&z) {
            // Manuel kontrolleri sÄ±fÄ±rla
            Object.keys(controls).forEach(k => { 
                controls[k] = false; 
                document.getElementById('btn-'+k)?.classList.remove('active'); 
            });
            fetch(`/goto?sid=${sid}&user=${sel}&x=${x}&y=${y}&z=${z}`);
        }
    }

    // OTOMASYON Ã–ZELLÄ°KLERÄ°
    function toggleAutoEat() {
        if(!sel) return alert("Ã–nce bot seÃ§!");
        const btn = document.getElementById('autoEatBtn');
        const span = btn.querySelector('span');
        if(span.style.color === 'rgb(39, 174, 96)') {
            span.style.color = '#e74c3c';
            span.innerText = 'âœ˜';
        } else {
            span.style.color = '#27ae60';
            span.innerText = 'âœ”';
        }
    }

    function toggleAutoArmor() {
        if(!sel) return alert("Ã–nce bot seÃ§!");
        const btn = document.getElementById('autoArmorBtn');
        const span = btn.querySelector('span');
        if(span.style.color === 'rgb(39, 174, 96)') {
            span.style.color = '#e74c3c';
            span.innerText = 'âœ˜';
        } else {
            span.style.color = '#27ae60';
            span.innerText = 'âœ”';
        }
    }

    function togglePVP() {
        if(!sel) return alert("Ã–nce bot seÃ§!");
        const btn = document.getElementById('pvpBtn');
        const span = btn.querySelector('span');
        if(span.style.color === 'rgb(39, 174, 96)') {
            span.style.color = '#e74c3c';
            span.innerText = 'âœ˜';
        } else {
            span.style.color = '#27ae60';
            span.innerText = 'âœ”';
        }
    }

    // VERÄ° GÃœNCELLEME
    setInterval(async ()=>{
        try {
            const r = await fetch(`/data?sid=${sid}&user=${sel}`);
            const d = await r.json();
            
            // Bot listesini gÃ¼ncelle
            document.getElementById('blist').innerHTML = d.active.map(n=>`
                <div class="bot-item ${sel==n?'selected':''}" onclick="sel='${n}'">
                    <div class="bot-name">${n}</div>
                    <div class="bot-status">
                        <div class="status-dot"></div>
                        <button class="kill-btn" onclick="event.stopPropagation(); killBot('${n}')" title="Botu Kes">X</button>
                    </div>
                </div>
            `).join('');

            if(sel && d.logs[sel]) {
                const lb = document.getElementById('logbox');
                const scroll = lb.scrollTop + lb.clientHeight >= lb.scrollHeight - 20;
                lb.innerHTML = d.logs[sel].join('');
                if(scroll) lb.scrollTop = lb.scrollHeight;

                if(d.botData){
                    const bd = d.botData;
                    // Ä°statistikleri gÃ¼ncelle
                    document.getElementById('hp').innerText = `${bd.hp}`;
                    document.getElementById('food').innerText = `${bd.food}`;
                    document.getElementById('armor').innerText = `${bd.armor ? bd.armor.filter(x=>x).length : 0}/4`;
                    if(bd.pos) {
                        document.getElementById('pos').innerText = `${bd.pos.x}, ${bd.pos.y}, ${bd.pos.z}`;
                        document.getElementById('pos').parentElement.title = `ðŸ“ ${bd.pos.x}, ${bd.pos.y}, ${bd.pos.z}`;
                    }
                    
                    // Envanteri gÃ¼ncelle
                    document.getElementById('inv').innerHTML = bd.inv.map(i=>`
                        <div class="slot" onclick="fetch('/drop?sid=${sid}&user=${sel}&slot=${i.slot}')" title="${i.displayName || i.name}">
                            <img src="https://raw.githubusercontent.com/PrismarineJS/minecraft-assets/master/data/1.16.1/items/${i.name}.png" onerror="this.style.display='none'">
                            <span class="count">${i.count}</span>
                        </div>
                    `).join('');
                }
            }
        } catch(e){
            console.log("GÃ¼ncelleme hatasÄ±:", e);
        }
    }, 1000);
</script>
</body>
</html>